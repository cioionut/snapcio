"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479],{7479:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var n=a(5893),r=a(5988),c=a(7294),o=a(5819),i=a(7357),l=a(8456),s=a(3321),u=a(3946),d=a(4054),f=a(3841),v=a(4917),h=a(9074),m=a(5195),b=a(4229),g=a(7658),x=a(3851);var j=function(e){switch(function(e){var t=new Date;console.trace("["+t.toLocaleTimeString()+"] "+e)}(e),e.name){case"NotFoundError":alert("Unable to open your call because no camera and/or microphonewere found.");break;case"SecurityError":case"PermissionDeniedError":break;default:alert("Error opening your camera and/or microphone: "+e.message)}};function k(e){var t=e.defaultMute,a=void 0===t||t,k=e.hFlip,p=void 0!==k&&k,C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;_(!0),E(e);var n=y.current;return n.srcObject=e,n.volume=t?0:1,n.onloadedmetadata=function(){return n.play()},navigator.mediaDevices.enumerateDevices()},Z=(0,c.useContext)(x.WebRTCContext).hangUpCall,I=(0,c.useContext)(g.F),S=I.localStream,E=I.setLocalStream,y=(0,c.useRef)(null),w=(0,c.useState)(!1),T=w[0],Y=w[1],D=(0,c.useState)(!1),W=D[0],_=D[1],F=(0,c.useState)([]),L=(F[0],F[1]),N=(0,c.useState)(""),O=N[0],U=N[1],z=(0,c.useState)(""),A=z[0],M=z[1],R=(0,c.useState)([]),V=R[0],G=R[1],P=(0,c.useState)([]),q=P[0],B=P[1],H=V.map((function(e){return(0,n.jsx)(o.Z,{value:e.deviceId,children:e.label},e.deviceId)})),J=q.map((function(e){return(0,n.jsx)(o.Z,{value:e.deviceId,children:e.label},e.deviceId)}));(0,c.useEffect)((function(){if(S&&q.length>0){var e=S.getVideoTracks(),t=e?e[0]:void 0,a=q.find((function(e){return e.label===t.label}));M(a.deviceId)}}),[q,S]),(0,c.useEffect)((function(){if(S&&V.length>0){var e=S.getAudioTracks(),t=e?e[0]:void 0,a=V.find((function(e){return e.label===t.label}));U(a.deviceId)}}),[V,S]);var K=function(e){L(e);var t=e.filter((function(e){return"audioinput"===e.kind})),a=e.filter((function(e){return"videoinput"===e.kind}));G(t),B(a)},Q=(0,c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;S&&S.getTracks().forEach((function(e){e.stop()}));var a={audio:{deviceId:t?{exact:t}:void 0,echoCancellation:!0},video:{deviceId:e?{exact:e}:void 0}};navigator.mediaDevices.getUserMedia(a).then(C).then(K).catch(j)}),[S,O,A,K]),X=(0,c.useCallback)((function(e){M(e.target.value),Q(e.target.value)}),[Q]),$=(0,c.useCallback)((function(e){U(e.target.value),Q(void 0,e.target.value)}),[Q]),ee=(0,c.useCallback)((function(){Q()}),[Q]),te=(0,c.useCallback)((function(){_(!1),S&&S.getTracks().forEach((function(e){e.stop()})),y.current.srcObject=null,E(null),Z()}),[S,E,Z]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{sx:{display:"flex",height:{xs:300,md:500},justifyContent:"center",alignItems:"center",backgroundColor:"black"},children:W?(0,n.jsx)("video",{ref:y,className:"jsx-21692c2f1b6e7001 "+((p?"video-hflip":"")||"")}):(0,n.jsx)(l.Z,{})}),(0,n.jsxs)(i.Z,{sx:{mt:1},children:[W?(0,n.jsx)(s.Z,{variant:"outlined",color:"error",onClick:te,startIcon:(0,n.jsx)(m.Z,{}),children:"Stop Live"}):(0,n.jsx)(s.Z,{variant:"contained",color:"error",onClick:ee,startIcon:(0,n.jsx)(h.Z,{}),children:"GO LIVE"}),(0,n.jsx)(u.Z,{"aria-label":"settings",onClick:function(){Y(!T&&W)},children:(0,n.jsx)(b.Z,{color:T?"primary":"inherit"})})]}),T&&""!=A&&(0,n.jsx)(i.Z,{sx:{minWidth:120,my:2},children:(0,n.jsxs)(d.Z,{fullWidth:!0,children:[(0,n.jsx)(f.Z,{id:"select-camera-source-label",children:"Camera source"}),(0,n.jsx)(v.Z,{labelId:"select-camera-source-label",id:"select-camera-source",value:A,label:"Select Camera",onChange:X,children:J})]})}),T&&""!=O&&(0,n.jsx)(i.Z,{sx:{minWidth:120,my:2},children:(0,n.jsxs)(d.Z,{fullWidth:!0,children:[(0,n.jsx)(f.Z,{id:"select-audio-source-label",children:"Audio source"}),(0,n.jsx)(v.Z,{labelId:"select-audio-source-label",id:"select-audio-source",value:O,label:"Select audio",onChange:$,children:H})]})}),(0,n.jsx)(r.default,{id:"21692c2f1b6e7001",children:'video.jsx-21692c2f1b6e7001{max-width:100%;\nmax-height:100%}\n.video-hflip.jsx-21692c2f1b6e7001{-webkit-transform:rotateY(180deg);\n-moz-transform:rotateY(180deg);\n-ms-transform:rotateY(180deg);\ntransform:rotateY(180deg);\n-webkit-transform:rotateY(180deg);\n-moz-transform:rotateY(180deg)}\n.brokenvideo.jsx-21692c2f1b6e7001{background-image:url("/broken_stream.gif");\nbackground-repeat:no-repeat;\nbackground-color:#cccccc;\nmargin-bottom:15px}'})]})}}}]);