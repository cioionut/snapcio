"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479],{7479:function(e,a,t){t.r(a),t.d(a,{default:function(){return m}});var r=t(5893),n=t(5988),c=t(7294),i=t(5819),o=t(7357),l=t(8456),u=t(3321),d=t(4054),s=t(3841),f=t(4917),v=t(7658);var h=function(e){switch(function(e){var a=new Date;console.trace("["+a.toLocaleTimeString()+"] "+e)}(e),e.name){case"NotFoundError":alert("Unable to open your call because no camera and/or microphonewere found.");break;case"SecurityError":case"PermissionDeniedError":break;default:alert("Error opening your camera and/or microphone: "+e.message)}};function m(e){var a=e.defaultMute,t=void 0===a||a,m=e.hFlip,b=void 0!==m&&m,g=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;S(!0),j(e);var r=p.current;return r.srcObject=e,r.volume=a?0:1,r.onloadedmetadata=function(){return r.play()},navigator.mediaDevices.enumerateDevices()},x=(0,c.useContext)(v.F),k=x.localStream,j=x.setLocalStream,p=(0,c.useRef)(null),C=(0,c.useState)(!1),Z=C[0],S=C[1],I=(0,c.useState)([]),E=(I[0],I[1]),y=(0,c.useState)(""),w=y[0],Y=y[1],D=(0,c.useState)(""),T=D[0],_=D[1],F=(0,c.useState)([]),N=F[0],W=F[1],z=(0,c.useState)([]),A=z[0],L=z[1],M=N.map((function(e){return(0,r.jsx)(i.Z,{value:e.deviceId,children:e.label},e.deviceId)})),O=A.map((function(e){return(0,r.jsx)(i.Z,{value:e.deviceId,children:e.label},e.deviceId)}));(0,c.useEffect)((function(){if(k&&A.length>0){var e=k.getVideoTracks(),a=e?e[0]:void 0,t=A.find((function(e){return e.label===a.label}));_(t.deviceId)}}),[A,k]),(0,c.useEffect)((function(){if(k&&N.length>0){var e=k.getAudioTracks(),a=e?e[0]:void 0,t=N.find((function(e){return e.label===a.label}));Y(t.deviceId)}}),[N,k]);var U=function(e){E(e);var a=e.filter((function(e){return"audioinput"===e.kind})),t=e.filter((function(e){return"videoinput"===e.kind}));W(a),L(t)},P=(0,c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;k&&k.getTracks().forEach((function(e){e.stop()}));var t={audio:{deviceId:a?{exact:a}:void 0,echoCancellation:!0},video:{deviceId:e?{exact:e}:void 0}};navigator.mediaDevices.getUserMedia(t).then(g).then(U).catch(h)}),[k,w,T,U]),R=(0,c.useCallback)((function(e){_(e.target.value),P(e.target.value)}),[P]),V=(0,c.useCallback)((function(e){Y(e.target.value),P(void 0,e.target.value)}),[P]),q=(0,c.useCallback)((function(){P()}),[P]),B=(0,c.useCallback)((function(){S(!1),k&&k.getTracks().forEach((function(e){e.stop()})),p.current.srcObject=null,j(null)}),[k,j]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{sx:{display:"flex",my:1,height:300,justifyContent:"center",alignItems:"center",backgroundColor:"black"},children:Z?(0,r.jsx)("video",{ref:p,className:"jsx-21692c2f1b6e7001 "+((b?"video-hflip":"")||"")}):(0,r.jsx)(l.Z,{})}),(0,r.jsx)(o.Z,{children:Z?(0,r.jsx)(u.Z,{variant:"outlined",color:"error",onClick:B,children:"Stop Camera"}):(0,r.jsx)(u.Z,{variant:"outlined",onClick:q,children:"Start Camera"})}),""!=T&&(0,r.jsx)(o.Z,{sx:{minWidth:120,my:2},children:(0,r.jsxs)(d.Z,{fullWidth:!0,children:[(0,r.jsx)(s.Z,{id:"select-camera-source-label",children:"Camera source"}),(0,r.jsx)(f.Z,{labelId:"select-camera-source-label",id:"select-camera-source",value:T,label:"Select Camera",onChange:R,children:O})]})}),""!=w&&(0,r.jsx)(o.Z,{sx:{minWidth:120,my:2},children:(0,r.jsxs)(d.Z,{fullWidth:!0,children:[(0,r.jsx)(s.Z,{id:"select-audio-source-label",children:"Audio source"}),(0,r.jsx)(f.Z,{labelId:"select-audio-source-label",id:"select-audio-source",value:w,label:"Select audio",onChange:V,children:M})]})}),(0,r.jsx)(n.default,{id:"21692c2f1b6e7001",children:'video.jsx-21692c2f1b6e7001{max-width:100%;\nmax-height:100%}\n.video-hflip.jsx-21692c2f1b6e7001{-webkit-transform:rotateY(180deg);\n-moz-transform:rotateY(180deg);\n-ms-transform:rotateY(180deg);\ntransform:rotateY(180deg);\n-webkit-transform:rotateY(180deg);\n-moz-transform:rotateY(180deg)}\n.brokenvideo.jsx-21692c2f1b6e7001{background-image:url("/broken_stream.gif");\nbackground-repeat:no-repeat;\nbackground-color:#cccccc;\nmargin-bottom:15px}'})]})}}}]);